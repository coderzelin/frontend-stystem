### 现券 1.6.6

#### 项目的难点

- 有效期
  - 表格的每条报价都有有效期，由于表格有几千条数据，而且每条数据的有效期需要前端去判断是否失效，所以需要对有效期判断的准确性和性能有很高的要求，因为涉及到定时器的使用，需要及时的清理没用定时器，防止内存泄露

#### 解决方式

- 有效期
  - 因为对到期时间的准确性有要求，同时因为性能问题，定时器设置的间隔不能太短，所以设置了间隔一分钟去检查数据的有效期的时间戳是否小于当前时间的时间戳，而且为了准确性，需要在整分的时候检查是否失效，因此，我在获取表格数据的时候，开启一个定时器每秒去检查是否是整分，当检查到当前是整分（当前的时间戳模60000等于0）的时候，开启那个每分钟检查有效期的定时器，这样在后面每次都能整分的去检查有效期，保证了准确性，因为表格涉及到几千条数据，所以在表格滚动加载的时候只对新增的数据去检查一次，避免重复检查，保证性能的问题









